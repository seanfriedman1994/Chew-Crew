<mat-spinner *ngIf="isLoading"></mat-spinner>

  <mat-card class="profile" *ngIf="!isLoading">
    <mat-card-header>  
    <img mat-card-avatar class="header.image" [src]="crew.image" [alt]="crew.name">
    <mat-card-title>{{crew.name}}</mat-card-title>
    </mat-card-header>
    <mat-divider></mat-divider>
    <!-- <span class="pull right">
        <img mat-card-lg-image 
        [src]="crew.image" 
        [alt]="crew.name"
         class="img-responsive" 
        style="max-height: 150px;">
    </span> -->
    <mat-card-content class="profile-bio">
      <p>
          {{crew.description}}
      </p>
    </mat-card-content>
    <h3 mat-subheader>Members ({{totalCrewMembers}})</h3>
    <p *ngIf="crewMembers.length <= 0 && !isLoading">
      No Members!
    </p>
    <mat-list dense *ngIf="crewMembers.length > 0 && !isLoading">
        <mat-list-item *ngFor="let crewMember of crewMembers">
          <img matListAvatar [src]="crewMember.image" [alt]="crewMember.name">
          <h3 matLine>{{ crewMember.name }}</h3>
        </mat-list-item>
    </mat-list>

    <h3 mat-subheader>Events</h3>
      <mat-accordion multi="true" *ngIf="events.length > 0 && !isLoading">
          <mat-expansion-panel *ngFor="let event of events">
            <mat-expansion-panel-header>
              {{ event.name }}
            </mat-expansion-panel-header>
            <mat-panel-title>
                {{ event.date }}
            </mat-panel-title>
            <mat-panel-title>
                {{ event.location }}
            </mat-panel-title>
            <p class="event-description">{{ event.description }}</p>   
              <mat-action-row>
                  <a mat-button color="primary" [routerLink]="['/events', event.id]" *ngIf="userIsAuthenticated">
                    <i class="material-icons">
                      forward
                    </i>
                    ENTER
                  </a>
              </mat-action-row>
          </mat-expansion-panel>
        </mat-accordion>
        <a mat-raised-button color="accent" routerLink="/events/create" id="eventButton" >
          <i class="material-icons">
              event
          </i>
          New Event
        </a>
      <mat-action-row>
          <button mat-button class="green" (click)="onJoin(crew.id)" *ngIf="userIsAuthenticated && !isMember">
            <i class="material-icons">
              add_circle
            </i>
              JOIN CREW
          </button>
          <button mat-button color="warn" (click)="onLeave(crew.id)" *ngIf="userIsAuthenticated && isMember">
            <i class="material-icons">
              cancel
            </i>
              LEAVE CREW
          </button>
        <a mat-button class="blue" [routerLink]="['/crews/edit', crew.id]" *ngIf="crew && userIsAuthenticated && userId == crew.creator">
          <i class="material-icons">
              edit
          </i>
          EDIT CREW</a>
        <button mat-button color="warn" (click)="onDelete(crew.id)" *ngIf="crew && userIsAuthenticated && userId == crew.creator">
          <i class="material-icons">
              delete
            </i>
          DELETE CREW
        </button>
      </mat-action-row>
  </mat-card>